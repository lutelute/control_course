# 第11回：オブザーバ

## 1. オブザーバの必要性

状態フィードバック制御 $\mathbf{u} = -K\mathbf{x}$ には全状態の情報が必要。
しかし、通常は出力 $\mathbf{y} = C\mathbf{x}$ のみ測定可能。

**オブザーバ**：出力の観測から状態を推定する動的システム

## 2. 同一次元オブザーバ（Luenberger オブザーバ）

### 2.1 構造

$$\dot{\hat{\mathbf{x}}} = A\hat{\mathbf{x}} + B\mathbf{u} + L(\mathbf{y} - C\hat{\mathbf{x}})$$

ここで $\hat{\mathbf{x}}$ は状態の推定値、$L$ はオブザーバゲイン。

### 2.2 推定誤差のダイナミクス

推定誤差 $\mathbf{e} = \mathbf{x} - \hat{\mathbf{x}}$ について：

$$\dot{\mathbf{e}} = (A - LC)\mathbf{e}$$

### 2.3 収束条件

$A - LC$ の固有値がすべて左半平面にあれば $\mathbf{e}(t) \to \mathbf{0}$

## 3. オブザーバの極配置

### 3.1 設計定理

**定理：** $(A, C)$ が可観測 ⟺ $L$ により $A - LC$ の極を任意配置可能

### 3.2 双対性による設計

$(A, C)$ の可観測性 ⟺ $(A^T, C^T)$ の可制御性

よって、極配置の双対問題として $L$ を設計可能。

### 3.3 アッカーマンの公式（SISO系）

$$L = \phi(A)\mathcal{O}^{-1}\begin{bmatrix} 0 \\ \vdots \\ 0 \\ 1 \end{bmatrix}$$

## 4. オブザーバの極の選び方

### 4.1 分離定理との関係

制御器とオブザーバの極は独立に設計可能。

### 4.2 実用的指針

- オブザーバの極は制御器の極より **3〜5倍** 高速に
- ただし、高速すぎるとノイズの増幅が問題に

## 5. 出力フィードバック制御

### 5.1 構成

```
オブザーバ: ẋ̂ = Aẋ̂ + Bu + L(y - Cẋ̂)
制御則: u = -Kẋ̂
```

### 5.2 閉ループ系

$$\begin{bmatrix} \dot{\mathbf{x}} \\ \dot{\mathbf{e}} \end{bmatrix} = \begin{bmatrix} A-BK & BK \\ 0 & A-LC \end{bmatrix}\begin{bmatrix} \mathbf{x} \\ \mathbf{e} \end{bmatrix}$$

### 5.3 分離定理

閉ループ極 = 制御器の極 ∪ オブザーバの極

## 6. 低次元オブザーバ

### 6.1 動機

出力で直接観測できる状態は推定不要。

### 6.2 次元

$n$ 次系で $p$ 個の出力がある場合、$(n-p)$ 次元オブザーバで十分。

## 7. オブザーバの実装上の注意

- 初期値 $\hat{\mathbf{x}}(0)$ の選び方
- サンプリング時間の選定
- 数値誤差の蓄積

## 8. まとめ

- オブザーバは出力から状態を推定
- $L$ の設計により推定誤差の収束速度を調整
- 可観測性がオブザーバ設計の前提条件
- 分離定理により制御器と独立に設計可能
